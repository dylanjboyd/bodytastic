{% extends "base.html" %}
{% load medication_extras %}
{% load humanize %}
{% block title %}
    {% medicine_icon %}
    <div class="content">
        {{ object }}
        <div class="sub header">{{ consumptions.count|apnumber|title }} consumptions â€¢ {{ object.current_balance }} left</div>
    </div>
{% endblock title %}
{% block content %}
    <div class="ui small buttons">
        <a class="ui basic button" href="{% url 'medication:medicine-index' %}">
            <i aria-hidden="true" class="left arrow icon"></i>
            Back to Medicines
        </a>
        <a class="ui basic button"
           href="{% url 'medication:medicine-edit' object.pk %}">Edit</a>
        <a class="ui basic button"
           href="{% url 'medication:medicine-delete' object.pk %}">Delete</a>
    </div>
    <div class="ui hidden divider"></div>
    <div class="ui relaxed stackable grid">
        <div class="six wide column">
            <h3 class="ui header">
                Consumptions&nbsp;
                <a href="{% url 'medication:consumption-create' medicinepk=object.pk %}"
                   class="mini icon ui button">
                    <i aria-hidden="true" class="icon plus"></i>
                </a>
            </h3>
            {% consumption_table consumptions %}
        </div>
        <div class="ten wide column">
            <h3 class="ui header">
                Schedules&nbsp;
                <a href="{% url 'medication:schedule-create' medicinepk=object.pk %}"
                   class="mini icon ui button">
                    <i aria-hidden="true" class="icon plus"></i>
                </a>
            </h3>
            {% if schedules_active %}
                <h4 class="ui header">Active</h4>
                <div class="ui cards">
                    {% for schedule in schedules_active %}
                        {% schedule_card schedule %}
                    {% endfor %}
                </div>
            {% endif %}
            {% if schedules_past %}
                <h4 class="ui header">Past</h4>
                <div class="ui cards">
                    {% for schedule in schedules_past %}
                        {% schedule_card schedule %}
                    {% endfor %}
                </div>
            {% endif %}
            {% if schedules_future %}
                <h4 class="ui header">Future</h4>
                <div class="ui cards">
                    {% for schedule in schedules_future %}
                        {% schedule_card schedule %}
                    {% endfor %}
                </div>
            {% endif %}
        </div>
    </div>
{% endblock content %}
